<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>Florida Data Analysis</title>

<script src="site_libs/header-attrs-2.11/header-attrs.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/yeti.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<script src="site_libs/navigation-1.1/codefolding.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<script src="site_libs/htmlwidgets-1.5.4/htmlwidgets.js"></script>
<script src="site_libs/plotly-binding-4.10.0/plotly.js"></script>
<script src="site_libs/typedarray-0.1/typedarray.min.js"></script>
<link href="site_libs/crosstalk-1.1.1/css/crosstalk.css" rel="stylesheet" />
<script src="site_libs/crosstalk-1.1.1/js/crosstalk.min.js"></script>
<link href="site_libs/plotly-htmlwidgets-css-2.5.1/plotly-htmlwidgets.css" rel="stylesheet" />
<script src="site_libs/plotly-main-2.5.1/plotly-latest.min.js"></script>
<link href="site_libs/font-awesome-5.1.0/css/all.css" rel="stylesheet" />
<link href="site_libs/font-awesome-5.1.0/css/v4-shims.css" rel="stylesheet" />

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>








<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.tab('show');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->
<style type="text/css">
.code-folding-btn { margin-bottom: 4px; }
</style>



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Home</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Overview
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="overview.html">Project Overview</a>
    </li>
    <li>
      <a href="usa_analyzing.html">United States Overview</a>
    </li>
  </ul>
</li>
<li>
  <a href="report.html">Report</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    States of Choice
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="CA_data_analyzing.html">California</a>
    </li>
    <li>
      <a href="FL_data_analyzing.html">Florida</a>
    </li>
    <li>
      <a href="NY_data_analyzing.html">New York City</a>
    </li>
    <li>
      <a href="Ohio_data_analyzing.html">Ohio</a>
    </li>
  </ul>
</li>
<li>
  <a href="https://paulawucu.shinyapps.io/shiny_dashboard_upload/">Interactive Maps</a>
</li>
<li>
  <a href="regression_us.html">Regression</a>
</li>
<li>
  <a href="fact.html">Facts About</a>
</li>
<li>
  <a href="https://github.com/paulawucu/final_project">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">

<div class="btn-group pull-right float-right">
<button type="button" class="btn btn-default btn-xs btn-secondary btn-sm dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span>Code</span> <span class="caret"></span></button>
<ul class="dropdown-menu dropdown-menu-right" style="min-width: 50px;">
<li><a id="rmd-show-all-code" href="#">Show All Code</a></li>
<li><a id="rmd-hide-all-code" href="#">Hide All Code</a></li>
</ul>
</div>



<h1 class="title toc-ignore">Florida Data Analysis</h1>

</div>


<div id="florida-over-all" class="section level2">
<h2>Florida over all</h2>
<pre class="r"><code>drug_overdose = read_csv(&quot;./data/VSRR_Provisional_Drug_Overdose_Death_Counts.csv&quot;) %&gt;% 
  janitor::clean_names()
state_level = c(state.name[1:8], &quot;District of Columbia&quot;, state.name[9:32],&quot;New York City&quot;, state.name[33:50])
drug_overdose_52 = 
  drug_overdose %&gt;% 
  filter(!(state_name %in% c(&quot;United States&quot;))) %&gt;% 
  relocate(state_name) %&gt;% 
  mutate(month = factor(month, levels = month.name), # change month and year to factor
         year = factor(year),
         state_name = factor(state_name, levels = state_level)) %&gt;% 
  arrange(state_name) %&gt;% 
  group_by(state_name, year) %&gt;% 
  mutate(month = sort(month))

fl_death = 
  drug_overdose_52 %&gt;% 
  filter(state_name %in% &quot;Florida&quot;,
         indicator %in%  c(&quot;Number of Deaths&quot;, &quot;Number of Drug Overdose Deaths&quot;)) %&gt;% 
  select(year, month, indicator, deaths = data_value) %&gt;% 
  pivot_wider(
    names_from = indicator,
    values_from = deaths
  ) %&gt;% 
  janitor::clean_names() %&gt;% 
  group_by(year, month) %&gt;% 
  mutate(
    percent_overdose_death = number_of_drug_overdose_deaths / number_of_deaths
  )
 
fl_death  %&gt;% 
  ggplot(aes(x = month, y = percent_overdose_death, group = year, color = year))+
  geom_point()+
  geom_line()+
  ggtitle(&quot;Trends in Percent of Drug Overdose Death in FL Across Years&quot;) +
  theme(plot.title = element_text(hjust = 0.5)) +
  labs(y = &quot;Percent of Drug Overdose Death&quot;, x = &quot;Month&quot;, caption = &quot;Data comes from VSRR_Provisional_Drug_Overdose_Death_Counts dataset.&quot;)</code></pre>
<p><img src="FL_data_analyzing_files/figure-html/unnamed-chunk-2-1.png" width="90%" /></p>
<pre class="r"><code>fl_death %&gt;% 
  ggplot(aes(x = month, y = percent_overdose_death, group = NA, color = year))+
  geom_point()+
  geom_line()+
  scale_x_discrete(breaks = c(&quot;January&quot;, &quot;April&quot;, &quot;July&quot;, &quot;October&quot;, &quot;December&quot;),
                   labels = c(&quot;Jan&quot;, &quot;Apr&quot;, &quot;Jul&quot;, &quot;Oct&quot;, &quot;Dec&quot;)) +
  theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust= 1))+
  ggtitle(&quot;Trends in Percent of Drug Overdose Death in FL Across Years&quot;) +
  theme(plot.title = element_text(hjust = 0.5)) +
  labs(y = &quot;Percent of Drug Overdose Death&quot;, x = &quot;Month&quot;, caption = &quot;Data comes from VSRR_Provisional_Drug_Overdose_Death_Counts dataset.&quot;)+
  facet_grid(.~year)</code></pre>
<p><img src="FL_data_analyzing_files/figure-html/unnamed-chunk-2-2.png" width="90%" /></p>
<p>There’s a clear trend from years to years that in Florida, percent of drug overdose deaths increase overtime. In 2016, the percent of drug overdose deaths changes drastically from month to month, while in 2020, the percent of deaths reached its new high, made up more than 3% of the total deaths.</p>
<p><br><br></p>
</div>
<div id="opioids-in-years" class="section level2">
<h2>Opioids in years</h2>
<p>It’s extremely hard to find drug-specific data for those state missing specific drug types. Unfortunately, Florida is one of them. By contrast, data on opioid is much easier to find. There is another reason that we chose to select opioid instead of other drug types: it accounts for most of the death counts in the US across years. We show our justification down below.</p>
<pre class="r"><code>opioids_df = 
  drug_overdose_52 %&gt;%  
  ungroup() %&gt;% 
  select(state_name, year, month, indicator, data_value) %&gt;% 
  filter(!(state_name %in% c(&quot;Alabama&quot;, &quot;Arkansas&quot;, &quot;Florida&quot;, &quot;Idaho&quot;, &quot;Louisiana&quot;, &quot;Minnesota&quot;, &quot;Nebraska&quot;, &quot;North Dakota&quot;, &quot;Pennsylvania&quot;)),
         str_detect(indicator, &quot;T4&quot;),
         !year %in% c(2016, 2017)) %&gt;% 
  mutate(opioids_yn = ifelse(str_detect(indicator, &quot;opioids&quot;), TRUE, FALSE)) %&gt;% 
  group_by(year, month, opioids_yn) %&gt;% 
  summarize(opioids_rate = mean(data_value, na.rm = TRUE))
opioids_df %&gt;% 
  ungroup() %&gt;% 
  ggplot(aes(x = month, y = opioids_rate, group = opioids_yn, color = opioids_yn))+
  geom_point()+
  geom_line()+
  theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust= 1))+
  ggtitle(&quot;Opioids vs. Other Drugs Combined in US Across Years&quot;) +
  theme(plot.title = element_text(hjust = 0.5)) +
  labs(y = &quot;Drug Overdose Death Counts&quot;, x = &quot;Month&quot;, caption = &quot;Data comes from VSRR_Provisional_Drug_Overdose_Death_Counts dataset.&quot;)+
  facet_grid(.~year)</code></pre>
<p><img src="FL_data_analyzing_files/figure-html/unnamed-chunk-3-1.png" width="90%" /> <br> A picture is worth thousands of words, during the past 6 years, the opioid’s line was high above all other drugs combined, which proved our statement above.</p>
<p><br></p>
<div id="opioid-analyses-in-florida" class="section level3">
<h3>Opioid Analyses in Florida</h3>
<pre class="r"><code># read in data
fl_opi_death = read_csv(&quot;./data/fl_opi_death_15_19.csv&quot;) %&gt;% 
  janitor::clean_names() %&gt;% 
  select(state_name = state, year, month, deaths)

fl_opi_death_add = read_csv(&quot;./data/fl_opi_death_20_21.csv&quot;) %&gt;% 
  janitor::clean_names() %&gt;% 
  select(state_name = occurrence_state, year = year_code, month, deaths) 

fl_opi_death = bind_rows(fl_opi_death, fl_opi_death_add) %&gt;% 
  filter(!is.na(month)) %&gt;% 
  separate(month, into = c(&quot;month&quot;, &quot;useless&quot;), sep = &quot;\\,&quot;) %&gt;% 
  select(-useless) %&gt;% 
  mutate(month = substr(month, 1,3),
  month = month.name[match(str_to_title(month), month.abb)],
  month = factor(month, levels = month.name),
  year = factor(year)) %&gt;% 
  select(-state_name) %&gt;% 
  slice(-77)  # May 2021 is fairly provisional and inconsistent with other states
fl_opi_death  %&gt;% 
  ggplot(aes(x = month, y = deaths, group = year, color = year))+
  geom_point()+
  geom_line()+
  ggtitle(&quot;Opioids Deaths in Florida Across Years&quot;) +
  theme(plot.title = element_text(hjust = 0.5)) +
  labs(y = &quot;Opioids Overdose Death Counts&quot;, x = &quot;Month&quot;, caption = &quot;Opioids identified by selecting T40.0-40.4, 40.6&quot;)</code></pre>
<p><img src="FL_data_analyzing_files/figure-html/unnamed-chunk-4-1.png" width="90%" /></p>
<pre class="r"><code>fl_opi_death %&gt;% 
  ggplot(aes(x = month, y = deaths, group = NA, color = year))+
  geom_point()+
  geom_line()+
  theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust= 1))+
  ggtitle(&quot;Opioids Deaths in Florida Across Years&quot;) +
  theme(plot.title = element_text(hjust = 0.5)) +
  facet_grid(.~year)+
  labs(
      title = &quot;Number of Drug Overdose Deaths with Drug Categories by Year in CA&quot;,
      x = &quot;Month&quot;,
      y = &quot;Number of Drug Overdose Deaths&quot;,
    caption = &quot;Opioids identified by selecting T40.0-40.4, 40.6&quot;
  ) +
    theme(axis.text.x = element_text(angle = 90, hjust = 1)) </code></pre>
<p><img src="FL_data_analyzing_files/figure-html/unnamed-chunk-4-2.png" width="90%" /></p>
<p>Although in a zig-zag fashion, the death counts cause mainly by Opioids is climbing, every single month. There is a drastic drop between 2019 and 2020, probably because 1. the data is provisional for 2020 and 2021, indicated by the CDC; 2. COVID-19 interfered with the autopsy of drug overdose investigation.</p>
<p><br><br></p>
</div>
</div>
<div id="by-age-group-and-race" class="section level2">
<h2>By Age Group and Race</h2>
<pre class="r"><code>fl_death_by_age = 
  read_csv(&quot;./data/agegroup_race_state_year_99-19.csv&quot;) %&gt;%
  janitor::clean_names() %&gt;% 
  select(state, year, ten_year_age_groups, race, deaths, population) %&gt;% 
  filter(state %in% c(&quot;Florida&quot;)) %&gt;% 
  mutate(year = factor(year),
         crude_rate = deaths/population * 100000)


fl_death_by_age %&gt;% 
  mutate(ten_year_age_groups = gsub(&quot;years&quot;, &quot;&quot;, ten_year_age_groups)) %&gt;% 
  ggplot(aes(x = ten_year_age_groups , y = crude_rate, fill = race)) + 
  geom_boxplot(alpha = 0.5)+
  ggtitle(&quot;Crude Death Rate in Florida Across Race and Age Groups&quot;) +
  theme(plot.title = element_text(hjust = 0.5)) +
  labs(y = &quot;Drug Overdose Death Crude Rates&quot;, x = &quot;Age Groups&quot;)+
  facet_grid(~race)+
  theme(axis.text.x = element_text(angle = 90, vjust = 0.4, hjust = 1))</code></pre>
<p><img src="FL_data_analyzing_files/figure-html/unnamed-chunk-5-1.png" width="90%" /></p>
<p>Asian or Pacific Islanders only have drug overdose deaths cases between 25-44 age groups, while both Black or African Americans and White people have drug overdose deaths cases from age group 15-24 to nearly 85+. It’s also clear that in general white people have the highest crude death rates in nearly each age group, and the crude death rates reached as high as 60+ deaths/100,000 white people.</p>
<p><br><br></p>
</div>
<div id="income" class="section level2">
<h2>Income</h2>
<pre class="r"><code>fl_eco_df = 
  read_csv(&quot;./data/median_household_income_fl.csv&quot;) %&gt;% 
  janitor::clean_names() %&gt;% 
  select(year, household_income_by_race, household_income_by_race_moe, geography) %&gt;% 
  filter(
    str_detect(geography, &quot;FL|United States|Florida&quot;),
    year &gt;= &quot;2015&quot;) %&gt;% 
  mutate(year = factor(year))


fl_eco_df %&gt;% 
  mutate(text_label = str_c(&quot;Year: &quot;, year, &quot;\nMedian Household Income: $&quot;, household_income_by_race, 
                            &quot;\nMargin of error: ± $&quot;, household_income_by_race_moe)) %&gt;% 
  plot_ly(
    x = ~year, y = ~household_income_by_race, color = ~geography, text = ~text_label, 
    alpha = 0.5, type = &quot;scatter&quot;, mode = &quot;markers+lines&quot;, colors = &quot;viridis&quot;, error_y = ~list(array = household_income_by_race_moe)) %&gt;% 
  layout(
    title = &quot;Median Household Income: FLorida vs. The U.S&quot;,
         xaxis = list(title = &quot;Year&quot;),
         yaxis = list(title = &quot;Median Household Income&quot;))</code></pre>
<div id="htmlwidget-6fd199e4cda62fe2470e" style="width:90%;height:576px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-6fd199e4cda62fe2470e">{"x":{"visdat":{"afbb3425b90":["function () ","plotlyVisDat"]},"cur_data":"afbb3425b90","attrs":{"afbb3425b90":{"x":{},"y":{},"text":{},"mode":"markers+lines","error_y":{},"color":{},"colors":"viridis","alpha":0.5,"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter"}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"title":"Median Household Income: FLorida vs. The U.S","xaxis":{"domain":[0,1],"automargin":true,"title":"Year","type":"category","categoryorder":"array","categoryarray":["2015","2016","2017","2018","2019"]},"yaxis":{"domain":[0,1],"automargin":true,"title":"Median Household Income"},"hovermode":"closest","showlegend":true},"source":"A","config":{"modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"data":[{"x":["2019","2018","2017","2016","2015"],"y":[59227,55462,52594,50860,49426],"text":["Year: 2019<br />Median Household Income: $59227<br />Margin of error: ± $443","Year: 2018<br />Median Household Income: $55462<br />Margin of error: ± $384","Year: 2017<br />Median Household Income: $52594<br />Margin of error: ± $364","Year: 2016<br />Median Household Income: $50860<br />Margin of error: ± $241","Year: 2015<br />Median Household Income: $49426<br />Margin of error: ± $331"],"mode":"markers+lines","error_y":{"color":"rgba(68,1,84,0.5)","array":[118,443,680,1173,1146]},"type":"scatter","name":"Florida","marker":{"color":"rgba(68,1,84,0.5)","line":{"color":"rgba(68,1,84,1)"}},"textfont":{"color":"rgba(68,1,84,0.5)"},"error_x":{"color":"rgba(68,1,84,0.5)"},"line":{"color":"rgba(68,1,84,0.5)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["2019","2018","2017","2016","2015"],"y":[60141,56328,54284,51362,50441],"text":["Year: 2019<br />Median Household Income: $60141<br />Margin of error: ± $680","Year: 2018<br />Median Household Income: $56328<br />Margin of error: ± $732","Year: 2017<br />Median Household Income: $54284<br />Margin of error: ± $820","Year: 2016<br />Median Household Income: $51362<br />Margin of error: ± $402","Year: 2015<br />Median Household Income: $50441<br />Margin of error: ± $398"],"mode":"markers+lines","error_y":{"color":"rgba(59,82,139,0.5)","array":[94,384,732,1521,970]},"type":"scatter","name":"Miami-Fort Lauderdale-West Palm Beach, FL","marker":{"color":"rgba(59,82,139,0.5)","line":{"color":"rgba(59,82,139,1)"}},"textfont":{"color":"rgba(59,82,139,0.5)"},"error_x":{"color":"rgba(59,82,139,0.5)"},"line":{"color":"rgba(59,82,139,0.5)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["2019","2018","2017","2016","2015"],"y":[61876,58610,55089,52385,51077],"text":["Year: 2019<br />Median Household Income: $61876<br />Margin of error: ± $1173","Year: 2018<br />Median Household Income: $58610<br />Margin of error: ± $1521","Year: 2017<br />Median Household Income: $55089<br />Margin of error: ± $1026","Year: 2016<br />Median Household Income: $52385<br />Margin of error: ± $963","Year: 2015<br />Median Household Income: $51077<br />Margin of error: ± $824"],"mode":"markers+lines","error_y":{"color":"rgba(33,144,141,0.5)","array":[86,364,820,1026,599]},"type":"scatter","name":"Orlando-Kissimmee-Sanford, FL","marker":{"color":"rgba(33,144,141,0.5)","line":{"color":"rgba(33,144,141,1)"}},"textfont":{"color":"rgba(33,144,141,0.5)"},"error_x":{"color":"rgba(33,144,141,0.5)"},"line":{"color":"rgba(33,144,141,0.5)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["2019","2018","2017","2016","2015"],"y":[57906,54912,52212,51115,48911],"text":["Year: 2019<br />Median Household Income: $57906<br />Margin of error: ± $1146","Year: 2018<br />Median Household Income: $54912<br />Margin of error: ± $970","Year: 2017<br />Median Household Income: $52212<br />Margin of error: ± $599","Year: 2016<br />Median Household Income: $51115<br />Margin of error: ± $514","Year: 2015<br />Median Household Income: $48911<br />Margin of error: ± $891"],"mode":"markers+lines","error_y":{"color":"rgba(93,200,99,0.5)","array":[115,241,402,963,514]},"type":"scatter","name":"Tampa-St. Petersburg-Clearwater, FL","marker":{"color":"rgba(93,200,99,0.5)","line":{"color":"rgba(93,200,99,1)"}},"textfont":{"color":"rgba(93,200,99,0.5)"},"error_x":{"color":"rgba(93,200,99,0.5)"},"line":{"color":"rgba(93,200,99,0.5)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["2019","2018","2017","2016","2015"],"y":[65712,61937,60336,57617,55775],"text":["Year: 2019<br />Median Household Income: $65712<br />Margin of error: ± $118","Year: 2018<br />Median Household Income: $61937<br />Margin of error: ± $94","Year: 2017<br />Median Household Income: $60336<br />Margin of error: ± $86","Year: 2016<br />Median Household Income: $57617<br />Margin of error: ± $115","Year: 2015<br />Median Household Income: $55775<br />Margin of error: ± $85"],"mode":"markers+lines","error_y":{"color":"rgba(253,231,37,0.5)","array":[85,331,398,824,891]},"type":"scatter","name":"United States","marker":{"color":"rgba(253,231,37,0.5)","line":{"color":"rgba(253,231,37,1)"}},"textfont":{"color":"rgba(253,231,37,0.5)"},"error_x":{"color":"rgba(253,231,37,0.5)"},"line":{"color":"rgba(253,231,37,0.5)"},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
<p>The median household income of Florida and all of its region divisions all fell below the median household income of US. There’s a steady trends in all lines, indicating that the median household income increases over the years. <br></p>
<pre class="r"><code>#patchwork
income_drug_df = 
  fl_death %&gt;% 
  ungroup() %&gt;% 
  group_by(year) %&gt;% 
  summarize(overdose_death_rate = sum(number_of_drug_overdose_deaths)/sum(number_of_deaths)) %&gt;% 
  inner_join(., fl_eco_df %&gt;% filter(geography %in% &quot;Florida&quot;))
year_death = 
  income_drug_df %&gt;% 
  ggplot(aes(x = year, y = overdose_death_rate, group = NA))+
  geom_point()+
  geom_line()+
  ggtitle(&quot;Crude Death Rate Across Years in FL&quot;) +
  theme(plot.title = element_text(hjust = 0.5)) +
  labs(y = &quot;Drug Overdose Death Crude Rates&quot;, x = &quot;Year&quot;)
income_year = 
  income_drug_df %&gt;% 
  ggplot(aes(x = year, y = household_income_by_race, group = NA))+
  geom_point()+
  geom_line()+
  ggtitle(&quot;Median Household Income Across Years in FL&quot;) +
  theme(plot.title = element_text(hjust = 0.5)) +
  labs(y = &quot;Median Household Income &quot;, x = &quot;Year&quot;)

smooth = 
  income_drug_df %&gt;% 
  ggplot(aes(x = household_income_by_race, y = overdose_death_rate, group = NA))+
  geom_point()+
  geom_smooth(method = &quot;lm&quot;, se = FALSE, color = &quot;royalblue4&quot;)+
  ggtitle(&quot;Crude Death Rate vs. Median Household Income&quot;) +
  theme(plot.title = element_text(hjust = 0.5)) +
  labs(y = &quot;Drug Overdose Death Crude Rates&quot;, x = &quot;Median Household Income&quot;)
(year_death + income_year)/smooth</code></pre>
<p><img src="FL_data_analyzing_files/figure-html/unnamed-chunk-7-1.png" width="90%" /></p>
<p>Though we only have several points, the smoothed line of the bottom figure still showed a positive relation between drug overdose crude rate and median household income. This relationship can also be seen in the above two figure: as year goes by, the income rose, while the drug overdose death crude rates also rose.</p>
<p><br><br></p>
</div>
<div id="counties-change-over-the-years" class="section level2">
<h2>Counties change over the years</h2>
<p>Last but not the least, we wanted to draw maps to see what are the distribution of drug overdose death across counties. High crude death rates happened along the coastline for 2003 and 2008, specifically along middle east and west coasts, as well as in Key West Islands. Later in year 2013 and 2018, counties that have high crude death rates aggregated more the center of this peninsular, while the county that has the highest crude death rates is still along the coast. Together with the median household income graph above, we can see that both Miami-Fort Lauderdale-West Palm Beach and Tampa-St. Petersburg-Clearwater regions have low household income and have higher drug overdose death rates. <br></p>
<div id="counties-change-5-yr-interval" class="section level3 tabset">
<h3 class="tabset">Counties change, 5-yr interval</h3>
<div id="section" class="section level4">
<h4>2003</h4>
<pre class="r"><code>year_select = 2003
start_county_df = left_join(fl_county_df,abc, by = &quot;county&quot;) %&gt;% 
  select(county, year, death_rate, fips) %&gt;% 
  filter(year == year_select)

fips_add = c(12027, 12091, 12109, 12111)
a = 1
for (i in c(13,46,55,56)){
  start_county_df[i,4] = fips_add[a]
  a = a+1
}
start_county_df %&gt;% 
  group_by(fips) %&gt;% 
  mutate(fips = as.numeric(fips)) %&gt;% 
  rename(region = fips,
         value = death_rate) %&gt;% 
  county_choropleth(state_zoom = c(&quot;florida&quot;),
                     legend = &quot;death_rate&quot;)+
  highlight_county(start_county_df[which.max(pull(start_county_df, death_rate)),])+
  add_text_county(start_county_df[which.max(pull(start_county_df, death_rate)),])</code></pre>
<p><img src="FL_data_analyzing_files/figure-html/unnamed-chunk-9-1.png" width="90%" /></p>
</div>
<div id="section-1" class="section level4">
<h4>2008</h4>
<pre class="r"><code>year_select = 2008
start_county_df = left_join(fl_county_df,abc, by = &quot;county&quot;) %&gt;% 
  select(county, year, death_rate, fips) %&gt;% 
  filter(year == year_select)

fips_add = c(12027, 12091, 12109, 12111)
a = 1
for (i in c(13,46,55,56)){
  start_county_df[i,4] = fips_add[a]
  a = a+1
}
start_county_df %&gt;% 
  group_by(fips) %&gt;% 
  mutate(fips = as.numeric(fips)) %&gt;% 
  rename(region = fips,
         value = death_rate) %&gt;% 
  county_choropleth(state_zoom = c(&quot;florida&quot;),
                     legend = &quot;death_rate&quot;)+
  highlight_county(start_county_df[which.max(pull(start_county_df, death_rate)),])+
  add_text_county(start_county_df[which.max(pull(start_county_df, death_rate)),])</code></pre>
<p><img src="FL_data_analyzing_files/figure-html/unnamed-chunk-10-1.png" width="90%" /></p>
</div>
<div id="section-2" class="section level4">
<h4>2013</h4>
<pre class="r"><code>year_select = 2013
start_county_df = left_join(fl_county_df,abc, by = &quot;county&quot;) %&gt;% 
  select(county, year, death_rate, fips) %&gt;% 
  filter(year == year_select)

fips_add = c(12027, 12091, 12109, 12111)
a = 1
for (i in c(13,46,55,56)){
  start_county_df[i,4] = fips_add[a]
  a = a+1
}
start_county_df %&gt;% 
  group_by(fips) %&gt;% 
  mutate(fips = as.numeric(fips)) %&gt;% 
  rename(region = fips,
         value = death_rate) %&gt;% 
  county_choropleth(state_zoom = c(&quot;florida&quot;),
                     legend = &quot;death_rate&quot;)+
  highlight_county(start_county_df[which.max(pull(start_county_df, death_rate)),])+
  add_text_county(start_county_df[which.max(pull(start_county_df, death_rate)),])</code></pre>
<p><img src="FL_data_analyzing_files/figure-html/unnamed-chunk-11-1.png" width="90%" /></p>
</div>
<div id="section-3" class="section level4">
<h4>2018</h4>
<p><img src="FL_data_analyzing_files/figure-html/unnamed-chunk-12-1.png" width="90%" /></p>
</div>
</div>
</div>



</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->
<script>
$(document).ready(function () {
  window.initializeCodeFolding("hide" === "show");
});
</script>

<script>
$(document).ready(function ()  {

    // temporarily add toc-ignore selector to headers for the consistency with Pandoc
    $('.unlisted.unnumbered').addClass('toc-ignore')

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
